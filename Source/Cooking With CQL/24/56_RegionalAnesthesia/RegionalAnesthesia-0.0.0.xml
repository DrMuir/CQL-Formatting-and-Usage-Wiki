<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <identifier id="RegionalAnesthesia" version="0.1.002"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localIdentifier="QDM" uri="urn:healthit-gov:qdm:v5_3" version="5.3"/>
   </usings>
   <includes>
      <def localIdentifier="Global" path="MATGlobalCommonFunctions" version="2.0.000"/>
      <def localIdentifier="THKR" path="VTEICU" version="2.4.000"/>
   </includes>
   <parameters>
      <def name="Measurement Period" accessLevel="Public">
         <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
            <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <parameterTypeSpecifier xsi:type="IntervalTypeSpecifier">
            <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
               <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <pointType resultTypeName="t:DateTime" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
   </parameters>
   <codeSystems>
      <def name="LOINC:2.46" id="urn:oid:2.16.840.1.113883.6.1" version="urn:hl7:version:2.46" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="SNOMEDCT:2016-03" id="urn:oid:2.16.840.1.113883.6.96" version="urn:hl7:version:2016-03" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="SNOMEDCT:2018-03" id="urn:oid:2.16.840.1.113883.6.96" version="urn:hl7:version:2018-03" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
   </codeSystems>
   <valueSets>
      <def name="ONC Administrative Sex" id="urn:oid:2.16.840.1.113762.1.4.1" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Race" id="urn:oid:2.16.840.1.114222.4.11.836" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Ethnicity" id="urn:oid:2.16.840.1.114222.4.11.837" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Payer" id="urn:oid:2.16.840.1.114222.4.11.3591" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Encounter Inpatient" id="urn:oid:2.16.840.1.113883.3.666.5.307" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Malignant Neoplasm of bone of lower Limb, pelvis, sacrum, coccyx" id="urn:oid:2.16.840.1.113762.1.4.1029.72" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Mechanical Complications of hip and knee prosthetic devices" id="urn:oid:2.16.840.1.113762.1.4.1029.75" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Regional Anesthesia" id="urn:oid:2.16.840.1.113762.1.4.1029.68" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Partial hip and partial knee replacements" id="urn:oid:2.16.840.1.113762.1.4.1029.79" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Patient Refusal" id="urn:oid:2.16.840.1.113883.3.117.1.7.1.93" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Principal" id="urn:oid:2.16.840.1.113883.3.117.1.7.1.14" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Removal of implanted device/prostheses from hip/knee" id="urn:oid:2.16.840.1.113762.1.4.1029.83" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Revision and Resurfacing Procedures of Hip &amp; Knee" id="urn:oid:2.16.840.1.113762.1.4.1029.87" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Spinal Fusion" id="urn:oid:2.16.840.1.113762.1.4.1029.100" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Medical Reason Excluding Clinical Trial" id="urn:oid:2.16.840.1.113762.1.4.1029.113" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Total Hip Replacement" id="urn:oid:2.16.840.1.113762.1.4.1029.91" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Total Hip, Total Knee Replacement" id="urn:oid:2.16.840.1.113762.1.4.1029.96" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
      <def name="Total Knee Replacement" id="urn:oid:2.16.840.1.113762.1.4.1029.95" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
      </def>
   </valueSets>
   <codes>
      <def resultTypeName="t:Code" name="Birthdate" id="21112-8" display="Birth date" accessLevel="Public">
         <codeSystem name="LOINC:2.46">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </codeSystem>
      </def>
      <def resultTypeName="t:Code" name="Dead" id="419099009" display="Dead" accessLevel="Public">
         <codeSystem name="SNOMEDCT:2016-03">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </codeSystem>
      </def>
      <def resultTypeName="t:Code" name="Postoperative anesthesia care unit (environment)" id="398161000" display="Postoperative anesthesia care unit (environment)" accessLevel="Public">
         <codeSystem name="SNOMEDCT:2018-03">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </codeSystem>
      </def>
      <def resultTypeName="t:Code" name="Principal (qualifier value)" id="63161005" display="Principal (qualifier value)" accessLevel="Public">
         <codeSystem name="SNOMEDCT:2018-03">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </codeSystem>
      </def>
   </codes>
   <statements>
      <def name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand dataType="qdm53:Patient" templateId="Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def name="SDE Ethnicity" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PatientCharacteristicEthnicity" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression dataType="qdm53:PatientCharacteristicEthnicity" codeProperty="code" xsi:type="Retrieve">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PatientCharacteristicEthnicity" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <codes name="Ethnicity" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def name="SDE Payer" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PatientCharacteristicPayer" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression dataType="qdm53:PatientCharacteristicPayer" codeProperty="code" xsi:type="Retrieve">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PatientCharacteristicPayer" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <codes name="Payer" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def name="SDE Race" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PatientCharacteristicRace" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression dataType="qdm53:PatientCharacteristicRace" codeProperty="code" xsi:type="Retrieve">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PatientCharacteristicRace" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <codes name="Race" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def name="SDE Sex" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PatientCharacteristicSex" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression dataType="qdm53:PatientCharacteristicSex" codeProperty="code" xsi:type="Retrieve">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PatientCharacteristicSex" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <codes name="ONC Administrative Sex" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def name="Encounters Ages Greater Than Or Equal To 18" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="InpatientEncounter">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Inpatient Encounter" libraryName="Global" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <relationship alias="BirthDate" xsi:type="With">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PatientCharacteristicBirthdate" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression dataType="qdm53:PatientCharacteristicBirthdate" xsi:type="Retrieve">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PatientCharacteristicBirthdate" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
               <suchThat resultTypeName="t:Boolean" xsi:type="GreaterOrEqual">
                  <operand resultTypeName="t:Integer" name="CalendarAgeInYearsAt" libraryName="Global" xsi:type="FunctionRef">
                     <operand resultTypeName="t:DateTime" path="birthDatetime" scope="BirthDate" xsi:type="Property"/>
                     <operand resultTypeName="t:DateTime" xsi:type="Start">
                        <operand path="relevantPeriod" scope="InpatientEncounter" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </operand>
                  </operand>
                  <operand resultTypeName="t:Integer" valueType="t:Integer" value="18" xsi:type="Literal"/>
               </suchThat>
            </relationship>
         </expression>
      </def>
      <def name="Total Hip Total Knee Procedure" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="TotalHipTotalKneeProcedures">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression dataType="qdm53:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <codes name="Total Hip, Total Knee Replacement" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <relationship resultTypeName="qdm53:PositiveEncounterPerformed" alias="QualifyingEncounters" xsi:type="With">
               <expression resultTypeName="qdm53:PositiveEncounterPerformed" name="Encounter" xsi:type="OperandRef"/>
               <suchThat resultTypeName="t:Boolean" xsi:type="In">
                  <operand xsi:type="Start">
                     <operand path="relevantPeriod" scope="TotalHipTotalKneeProcedures" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </operand>
                  </operand>
                  <operand lowClosed="true" highClosed="true" xsi:type="Interval">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <low resultTypeName="t:DateTime" xsi:type="Subtract">
                        <operand resultTypeName="t:DateTime" xsi:type="Start">
                           <operand path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </operand>
                        </operand>
                        <operand resultTypeName="t:Quantity" value="48" unit="hours" xsi:type="Quantity"/>
                     </low>
                     <high resultTypeName="t:DateTime" xsi:type="End">
                        <operand path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </high>
                  </operand>
               </suchThat>
            </relationship>
         </expression>
         <operand name="Encounter">
            <operandTypeSpecifier resultTypeName="qdm53:PositiveEncounterPerformed" name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def name="Total Hip Total Knee Principal Procedure Ages Greater Than Or Equal To 18" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="QualifyingEncounters">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Encounters Ages Greater Than Or Equal To 18" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where resultTypeName="t:Boolean" xsi:type="InValueSet">
               <code xsi:type="ToConcept">
                  <operand xsi:type="Query">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <source alias="$this">
                        <expression name="Total Hip Total Knee Procedure" xsi:type="FunctionRef">
                           <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <operand resultTypeName="qdm53:PositiveEncounterPerformed" name="QualifyingEncounters" xsi:type="AliasRef"/>
                        </expression>
                     </source>
                     <where xsi:type="Not">
                        <operand xsi:type="IsNull">
                           <operand path="ordinality" xsi:type="Property">
                              <source name="$this" xsi:type="AliasRef"/>
                           </operand>
                        </operand>
                     </where>
                     <return>
                        <expression path="ordinality" xsi:type="Property">
                           <source name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </operand>
               </code>
               <valueset name="Principal">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </valueset>
            </where>
         </expression>
      </def>
      <def name="Total Replacements Without Malignancy Or Mechanical Complications Diagnoses" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="QualifyingEncounters">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Total Hip Total Knee Principal Procedure Ages Greater Than Or Equal To 18" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <relationship alias="QualifyingEncountersDiagnosis" xsi:type="With">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression path="diagnoses" scope="QualifyingEncounters" xsi:type="Property">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
               <suchThat resultTypeName="t:Boolean" xsi:type="And">
                  <operand resultTypeName="t:Boolean" xsi:type="InValueSet">
                     <code resultTypeName="t:Code" xsi:type="Query">
                        <source resultTypeName="t:Code" alias="not">
                           <expression resultTypeName="t:Code" name="QualifyingEncountersDiagnosis" xsi:type="AliasRef"/>
                        </source>
                     </code>
                     <valueset name="Malignant Neoplasm of bone of lower Limb, pelvis, sacrum, coccyx">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </valueset>
                  </operand>
                  <operand resultTypeName="t:Boolean" xsi:type="InValueSet">
                     <code resultTypeName="t:Code" xsi:type="Query">
                        <source resultTypeName="t:Code" alias="not">
                           <expression resultTypeName="t:Code" name="QualifyingEncountersDiagnosis" xsi:type="AliasRef"/>
                        </source>
                     </code>
                     <valueset name="Mechanical Complications of hip and knee prosthetic devices">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </valueset>
                  </operand>
               </suchThat>
            </relationship>
         </expression>
      </def>
      <def name="PACU Discharges" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="QualifyingEncounters">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Total Hip Total Knee Principal Procedure Ages Greater Than Or Equal To 18" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <where resultTypeName="t:Boolean" xsi:type="Exists">
               <operand xsi:type="Query">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:FacilityLocation" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <source alias="Locations">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="qdm53:FacilityLocation" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <expression path="facilityLocations" scope="QualifyingEncounters" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="qdm53:FacilityLocation" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </expression>
                  </source>
                  <where resultTypeName="t:Boolean" xsi:type="And">
                     <operand resultTypeName="t:Boolean" xsi:type="Equal">
                        <operand resultTypeName="t:Code" path="code" scope="Locations" xsi:type="Property"/>
                        <operand resultTypeName="t:Code" name="Postoperative anesthesia care unit (environment)" xsi:type="CodeRef"/>
                     </operand>
                     <operand resultTypeName="t:Boolean" xsi:type="IncludedIn">
                        <operand path="locationPeriod" scope="Locations" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                        <operand path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </operand>
                  </where>
               </operand>
            </where>
         </expression>
      </def>
      <def name="No Regional Anesthesia Due to Patient Refusal or Medical Reason 2" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:NegativeProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:NegativeProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="NoRegionalAnesthesia">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:NegativeProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression dataType="qdm53:NegativeProcedurePerformed" templateId="NegativeProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:NegativeProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <codes name="Regional Anesthesia" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <where resultTypeName="t:Boolean" xsi:type="Or">
               <operand resultTypeName="t:Boolean" xsi:type="InValueSet">
                  <code resultTypeName="t:Code" path="negationRationale" scope="NoRegionalAnesthesia" xsi:type="Property"/>
                  <valueset name="Patient Refusal">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                  </valueset>
               </operand>
               <operand resultTypeName="t:Boolean" xsi:type="InValueSet">
                  <code resultTypeName="t:Code" path="negationRationale" scope="NoRegionalAnesthesia" xsi:type="Property"/>
                  <valueset name="Medical Reason Excluding Clinical Trial">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                  </valueset>
               </operand>
            </where>
         </expression>
      </def>
      <def name="Regional Anesthesia 60 Minutes Prior To or During Total Hip Total Knee Replacement" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="TotalHipTotalKneeProcedures">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Total Hip Total Knee Principal Procedure Ages Greater Than Or Equal To 18" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <relationship alias="RegionalAnesthesia" xsi:type="With">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression dataType="qdm53:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <codes name="Regional Anesthesia" xsi:type="ValueSetRef"/>
               </expression>
               <suchThat resultTypeName="t:Boolean" xsi:type="In">
                  <operand xsi:type="Start">
                     <operand path="relevantPeriod" scope="RegionalAnesthesia" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </operand>
                  </operand>
                  <operand lowClosed="true" highClosed="true" xsi:type="Interval">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <low resultTypeName="t:DateTime" xsi:type="Subtract">
                        <operand resultTypeName="t:DateTime" xsi:type="Start">
                           <operand path="relevantPeriod" scope="TotalHipTotalKneeProcedures" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </operand>
                        </operand>
                        <operand resultTypeName="t:Quantity" value="60" unit="minutes" xsi:type="Quantity"/>
                     </low>
                     <high resultTypeName="t:DateTime" xsi:type="End">
                        <operand path="relevantPeriod" scope="TotalHipTotalKneeProcedures" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </high>
                  </operand>
               </suchThat>
            </relationship>
         </expression>
      </def>
      <def name="Numerator" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression name="Regional Anesthesia 60 Minutes Prior To or During Total Hip Total Knee Replacement" xsi:type="ExpressionRef">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </expression>
      </def>
      <def name="History of Spinal Fusion" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="QualifyingEncounters">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Encounters Ages Greater Than Or Equal To 18" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <relationship alias="Procedure" xsi:type="With">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression xsi:type="Query">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <source alias="Procedure">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <expression name="Total Hip Total Knee Procedure" xsi:type="FunctionRef">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <operand resultTypeName="qdm53:PositiveEncounterPerformed" name="QualifyingEncounters" xsi:type="AliasRef"/>
                     </expression>
                  </source>
                  <relationship alias="HistoryOfSpinalFusion" xsi:type="With">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <expression dataType="qdm53:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <codes name="Spinal Fusion" xsi:type="ValueSetRef"/>
                     </expression>
                     <suchThat resultTypeName="t:Boolean" xsi:type="And">
                        <operand resultTypeName="t:Boolean" xsi:type="InValueSet">
                           <code resultTypeName="t:Code" path="ordinality" scope="Procedure" xsi:type="Property"/>
                           <valueset name="Principal">
                              <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                 <elementType name="t:Code" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </valueset>
                        </operand>
                        <operand resultTypeName="t:Boolean" xsi:type="Before">
                           <operand xsi:type="Start">
                              <operand path="relevantPeriod" scope="HistoryOfSpinalFusion" xsi:type="Property">
                                 <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </resultTypeSpecifier>
                              </operand>
                           </operand>
                           <operand resultTypeName="t:DateTime" xsi:type="Start">
                              <operand path="relevantPeriod" scope="Procedure" xsi:type="Property">
                                 <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </resultTypeSpecifier>
                              </operand>
                           </operand>
                        </operand>
                     </suchThat>
                  </relationship>
               </expression>
               <suchThat resultTypeName="t:Boolean" valueType="t:Boolean" value="true" xsi:type="Literal"/>
            </relationship>
         </expression>
      </def>
      <def name="Denominator Exclusions" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression name="History of Spinal Fusion" xsi:type="ExpressionRef">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </expression>
      </def>
      <def name="Total Replacements Where No Concurrent Procedures Performed" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="QualifyingEncounters">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Total Hip Total Knee Principal Procedure Ages Greater Than Or Equal To 18" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <relationship alias="PartialOrRemovalProcedures" xsi:type="Without">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression xsi:type="Union">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <operand xsi:type="Union">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <operand dataType="qdm53:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <codes name="Partial hip and partial knee replacements" xsi:type="ValueSetRef"/>
                     </operand>
                     <operand dataType="qdm53:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <codes name="Removal of implanted device/prostheses from hip/knee" xsi:type="ValueSetRef"/>
                     </operand>
                  </operand>
                  <operand dataType="qdm53:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <codes name="Revision and Resurfacing Procedures of Hip &amp; Knee" xsi:type="ValueSetRef"/>
                  </operand>
               </expression>
               <suchThat resultTypeName="t:Boolean" xsi:type="In">
                  <operand xsi:type="Start">
                     <operand path="relevantPeriod" scope="PartialOrRemovalProcedures" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </operand>
                  </operand>
                  <operand lowClosed="true" highClosed="true" xsi:type="Interval">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <low resultTypeName="t:DateTime" xsi:type="Subtract">
                        <operand resultTypeName="t:DateTime" xsi:type="Start">
                           <operand path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </operand>
                        </operand>
                        <operand resultTypeName="t:Quantity" value="48" unit="hours" xsi:type="Quantity"/>
                     </low>
                     <high resultTypeName="t:DateTime" xsi:type="End">
                        <operand path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </high>
                  </operand>
               </suchThat>
            </relationship>
         </expression>
      </def>
      <def name="Total Hip Total Knee Replacements Without Concurrent Procedures or Malignancy or Mechanical Complications" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Union">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <operand name="Total Replacements Where No Concurrent Procedures Performed" xsi:type="ExpressionRef">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
            </operand>
            <operand name="Total Replacements Without Malignancy Or Mechanical Complications Diagnoses" xsi:type="ExpressionRef">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
            </operand>
         </expression>
      </def>
      <def name="Initial Population" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression name="Total Hip Total Knee Replacements Without Concurrent Procedures or Malignancy or Mechanical Complications" xsi:type="ExpressionRef">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </expression>
      </def>
      <def name="Denominator" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression name="Initial Population" xsi:type="ExpressionRef">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
         </expression>
      </def>
      <def name="Total Hip and Total Knee As Principal Procedure" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
            </resultTypeSpecifier>
            <source alias="TotalHipTotalKneeProcedures">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression dataType="qdm53:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <codes name="Total Hip, Total Knee Replacement" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <relationship alias="QualifyingEncounters" xsi:type="With">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Encounters Ages Greater Than Or Equal To 18" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
               <suchThat resultTypeName="t:Boolean" xsi:type="In">
                  <operand xsi:type="Start">
                     <operand path="relevantPeriod" scope="TotalHipTotalKneeProcedures" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </operand>
                  </operand>
                  <operand lowClosed="true" highClosed="true" xsi:type="Interval">
                     <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <low resultTypeName="t:DateTime" xsi:type="Subtract">
                        <operand resultTypeName="t:DateTime" xsi:type="Start">
                           <operand path="relevantPeriod" scope="TotalHipTotalKneeProcedures" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </operand>
                        </operand>
                        <operand resultTypeName="t:Quantity" value="48" unit="hours" xsi:type="Quantity"/>
                     </low>
                     <high resultTypeName="t:DateTime" xsi:type="End">
                        <operand path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                        </operand>
                     </high>
                  </operand>
               </suchThat>
            </relationship>
            <where resultTypeName="t:Boolean" xsi:type="Equal">
               <operand resultTypeName="t:Code" path="ordinality" scope="TotalHipTotalKneeProcedures" xsi:type="Property"/>
               <operand resultTypeName="t:Code" name="Principal (qualifier value)" xsi:type="CodeRef"/>
            </where>
         </expression>
      </def>
      <def name="Proposed Total Hip and Knee Procedure with Age 18" context="Patient" accessLevel="Public">
         <resultTypeSpecifier xsi:type="ListTypeSpecifier">
            <elementType xsi:type="TupleTypeSpecifier">
               <element name="id">
                  <type name="qdm53:Id" xsi:type="NamedTypeSpecifier"/>
               </element>
               <element name="EncounterRelevantPeroid">
                  <type xsi:type="IntervalTypeSpecifier">
                     <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </type>
               </element>
               <element name="ProcedureRelevantPeriod">
                  <type xsi:type="ListTypeSpecifier">
                     <elementType xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </type>
               </element>
            </elementType>
         </resultTypeSpecifier>
         <expression xsi:type="Query">
            <resultTypeSpecifier xsi:type="ListTypeSpecifier">
               <elementType xsi:type="TupleTypeSpecifier">
                  <element name="id">
                     <type name="qdm53:Id" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element name="EncounterRelevantPeroid">
                     <type xsi:type="IntervalTypeSpecifier">
                        <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </type>
                  </element>
                  <element name="ProcedureRelevantPeriod">
                     <type xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </type>
                  </element>
               </elementType>
            </resultTypeSpecifier>
            <source alias="QualifyingEncounters">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression name="Encounters Ages Greater Than Or Equal To 18" xsi:type="ExpressionRef">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveEncounterPerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
               </expression>
            </source>
            <let identifier="TotalHipTotalKneeProcedures">
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
               </resultTypeSpecifier>
               <expression xsi:type="Query">
                  <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                     <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                  </resultTypeSpecifier>
                  <source alias="TotalHipTotalKneeProcedures">
                     <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                     </resultTypeSpecifier>
                     <expression dataType="qdm53:PositiveProcedurePerformed" templateId="PositiveProcedurePerformed" codeProperty="code" xsi:type="Retrieve">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                        <codes name="Total Hip, Total Knee Replacement" xsi:type="ValueSetRef"/>
                     </expression>
                  </source>
                  <where resultTypeName="t:Boolean" xsi:type="And">
                     <operand resultTypeName="t:Boolean" xsi:type="In">
                        <operand xsi:type="Start">
                           <operand path="relevantPeriod" scope="TotalHipTotalKneeProcedures" xsi:type="Property">
                              <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </operand>
                        </operand>
                        <operand lowClosed="true" highClosed="true" xsi:type="Interval">
                           <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </resultTypeSpecifier>
                           <low resultTypeName="t:DateTime" xsi:type="Subtract">
                              <operand resultTypeName="t:DateTime" xsi:type="Start">
                                 <operand path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                                    <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                       <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                    </resultTypeSpecifier>
                                 </operand>
                              </operand>
                              <operand resultTypeName="t:Quantity" value="48" unit="hours" xsi:type="Quantity"/>
                           </low>
                           <high resultTypeName="t:DateTime" xsi:type="End">
                              <operand path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                                 <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                    <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                 </resultTypeSpecifier>
                              </operand>
                           </high>
                        </operand>
                     </operand>
                     <operand resultTypeName="t:Boolean" xsi:type="Equal">
                        <operand resultTypeName="t:Code" path="ordinality" scope="TotalHipTotalKneeProcedures" xsi:type="Property"/>
                        <operand resultTypeName="t:Code" name="Principal (qualifier value)" xsi:type="CodeRef"/>
                     </operand>
                  </where>
               </expression>
            </let>
            <return>
               <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                  <elementType xsi:type="TupleTypeSpecifier">
                     <element name="id">
                        <type name="qdm53:Id" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="EncounterRelevantPeroid">
                        <type xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </type>
                     </element>
                     <element name="ProcedureRelevantPeriod">
                        <type xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </type>
                     </element>
                  </elementType>
               </resultTypeSpecifier>
               <expression xsi:type="Tuple">
                  <resultTypeSpecifier xsi:type="TupleTypeSpecifier">
                     <element name="id">
                        <type name="qdm53:Id" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element name="EncounterRelevantPeroid">
                        <type xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </type>
                     </element>
                     <element name="ProcedureRelevantPeriod">
                        <type xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </type>
                     </element>
                  </resultTypeSpecifier>
                  <element name="id">
                     <value resultTypeName="qdm53:Id" path="id" scope="QualifyingEncounters" xsi:type="Property"/>
                  </element>
                  <element name="EncounterRelevantPeroid">
                     <value path="relevantPeriod" scope="QualifyingEncounters" xsi:type="Property">
                        <resultTypeSpecifier xsi:type="IntervalTypeSpecifier">
                           <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </resultTypeSpecifier>
                     </value>
                  </element>
                  <element name="ProcedureRelevantPeriod">
                     <value xsi:type="Query">
                        <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                           <elementType xsi:type="IntervalTypeSpecifier">
                              <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </resultTypeSpecifier>
                        <source alias="$this">
                           <expression name="TotalHipTotalKneeProcedures" xsi:type="QueryLetRef">
                              <resultTypeSpecifier xsi:type="ListTypeSpecifier">
                                 <elementType name="qdm53:PositiveProcedurePerformed" xsi:type="NamedTypeSpecifier"/>
                              </resultTypeSpecifier>
                           </expression>
                        </source>
                        <where xsi:type="Not">
                           <operand xsi:type="IsNull">
                              <operand path="relevantPeriod" xsi:type="Property">
                                 <source name="$this" xsi:type="AliasRef"/>
                              </operand>
                           </operand>
                        </where>
                        <return>
                           <expression path="relevantPeriod" xsi:type="Property">
                              <source name="$this" xsi:type="AliasRef"/>
                           </expression>
                        </return>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
   </statements>
</library>


